{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "id": "GjPSfvoCpkZJ4_pt6UncE",
      "type": "rectangle",
      "x": 770,
      "y": 423,
      "width": 120,
      "height": 84,
      "angle": 0,
      "strokeColor": "#364fc7",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 66451884,
      "version": 77,
      "versionNonce": 1784427692,
      "isDeleted": false,
      "boundElementIds": [
        "4oY0LVNN6q0dSoJxcL_0U"
      ]
    },
    {
      "id": "frdbm6_OvRpeybj5onbFq",
      "type": "text",
      "x": 796.5,
      "y": 440,
      "width": 67,
      "height": 50,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 1201177772,
      "version": 30,
      "versionNonce": 1743253140,
      "isDeleted": false,
      "boundElementIds": null,
      "text": "Start \nOIDC",
      "fontSize": 20,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "baseline": 43
    },
    {
      "id": "PY5yrVNA_amj9zGXiVupN",
      "type": "rectangle",
      "x": 1022,
      "y": 427,
      "width": 139.99999999999994,
      "height": 83,
      "angle": 0,
      "strokeColor": "#364fc7",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 252151956,
      "version": 100,
      "versionNonce": 1350260012,
      "isDeleted": false,
      "boundElementIds": [
        "4oY0LVNN6q0dSoJxcL_0U",
        "UxVWaR69rJKDFTMZHW6gu"
      ]
    },
    {
      "id": "xZU4_4pjmRFhtU6xpQHqQ",
      "type": "text",
      "x": 1032.5,
      "y": 446,
      "width": 118,
      "height": 50,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 531715604,
      "version": 60,
      "versionNonce": 1866843436,
      "isDeleted": false,
      "boundElementIds": null,
      "text": "GetRedirect\nURL",
      "fontSize": 20,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "top",
      "baseline": 43
    },
    {
      "id": "4oY0LVNN6q0dSoJxcL_0U",
      "type": "arrow",
      "x": 905,
      "y": 473,
      "width": 112,
      "height": 2.0202192477742074,
      "angle": 0,
      "strokeColor": "#087f5b",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "round",
      "seed": 1948868140,
      "version": 92,
      "versionNonce": 2125732908,
      "isDeleted": false,
      "boundElementIds": null,
      "points": [
        [
          0,
          0
        ],
        [
          112,
          2.0202192477742074
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "focus": 0.15368241805023414,
        "gap": 15,
        "elementId": "GjPSfvoCpkZJ4_pt6UncE"
      },
      "endBinding": {
        "focus": -0.1853757907151281,
        "gap": 8,
        "elementId": "PY5yrVNA_amj9zGXiVupN"
      },
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "8IjKWYzNIlcKo1maduHlx",
      "type": "text",
      "x": 728,
      "y": 120,
      "width": 944,
      "height": 234,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 474323220,
      "version": 651,
      "versionNonce": 822898452,
      "isDeleted": false,
      "boundElementIds": null,
      "text": "Typical OIDC starts with redirecting to the external Auth-Provider.\n\nTo correlate the subsequent calls and to verify them, a state parameter is provided. \nTypically this state is held as a cookie.\n\nTo ensure that the cookie is written correctly at the originating domain, a additional hop at\nis introduced, where the cookie is written. \n\nOnly afterwards the OIDC flow starts with the \"real\" OIDC redirect",
      "fontSize": 20.553362445414848,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 226
    },
    {
      "id": "RmnuZCKmX_ldJGmdnyYR7",
      "type": "rectangle",
      "x": 1331,
      "y": 428,
      "width": 139.99999999999994,
      "height": 83,
      "angle": 0,
      "strokeColor": "#364fc7",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 1337915180,
      "version": 217,
      "versionNonce": 752077100,
      "isDeleted": false,
      "boundElementIds": [
        "4oY0LVNN6q0dSoJxcL_0U",
        "UxVWaR69rJKDFTMZHW6gu",
        "ayEJGU6Ll2hGKXR8ZZcdI"
      ]
    },
    {
      "id": "49RLQa5OGvzV193kwO17Y",
      "type": "text",
      "x": 1364,
      "y": 447,
      "width": 73,
      "height": 50,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 1773089196,
      "version": 188,
      "versionNonce": 1823070868,
      "isDeleted": false,
      "boundElementIds": null,
      "text": "internal\nHop",
      "fontSize": 20,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "top",
      "baseline": 43
    },
    {
      "id": "UxVWaR69rJKDFTMZHW6gu",
      "type": "arrow",
      "x": 1171.2149678148048,
      "y": 473.2403180802189,
      "width": 153.16535159128716,
      "height": 1.2233640224903297,
      "angle": 0,
      "strokeColor": "#087f5b",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "round",
      "seed": 2120177556,
      "version": 295,
      "versionNonce": 811189164,
      "isDeleted": false,
      "boundElementIds": null,
      "points": [
        [
          0,
          0
        ],
        [
          153.16535159128716,
          -1.2233640224903297
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "focus": 0.12767949714963842,
        "gap": 9.214967814804822,
        "elementId": "PY5yrVNA_amj9zGXiVupN"
      },
      "endBinding": {
        "focus": -0.045292844222462485,
        "gap": 6.619680593908015,
        "elementId": "RmnuZCKmX_ldJGmdnyYR7"
      },
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "3YDbMEp2bWLl-jiBxOSuR",
      "type": "text",
      "x": 978,
      "y": 533,
      "width": 256,
      "height": 50,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 644938284,
      "version": 63,
      "versionNonce": 1206343060,
      "isDeleted": false,
      "boundElementIds": null,
      "text": "returns the \"internal\" URL\n/redirect-oidc",
      "fontSize": 20,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 43
    },
    {
      "id": "gMTeyj9yazl3_lcuzLz7s",
      "type": "text",
      "x": 1338,
      "y": 397,
      "width": 130,
      "height": 25,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 1066274068,
      "version": 51,
      "versionNonce": 1868941484,
      "isDeleted": false,
      "boundElementIds": null,
      "text": "/redirect-oidc",
      "fontSize": 20,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 18
    },
    {
      "id": "OV4E93aS2FLjjFtVm_xmg",
      "type": "text",
      "x": 1293,
      "y": 536,
      "width": 252,
      "height": 225,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 473918100,
      "version": 151,
      "versionNonce": 1708141972,
      "isDeleted": false,
      "boundElementIds": [
        "ayEJGU6Ll2hGKXR8ZZcdI"
      ],
      "text": "write the state-cookie\nat the originating domain\n\nstate:<random>\n\nonly after this, the \"real\"\nredirect to the auth\nprovider is performed\n",
      "fontSize": 20,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 218
    },
    {
      "id": "nhYIEROZqBFpjBp5pyS_N",
      "type": "rectangle",
      "x": 1698,
      "y": 427,
      "width": 139.99999999999994,
      "height": 83,
      "angle": 0,
      "strokeColor": "#c92a2a",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 816663828,
      "version": 284,
      "versionNonce": 2027084204,
      "isDeleted": false,
      "boundElementIds": [
        "4oY0LVNN6q0dSoJxcL_0U",
        "UxVWaR69rJKDFTMZHW6gu",
        "ayEJGU6Ll2hGKXR8ZZcdI",
        "DO-1poJZdSRu2J4jrTcIT"
      ]
    },
    {
      "id": "kJxfEhgqOklp5HI3EtHXO",
      "type": "text",
      "x": 1724,
      "y": 443,
      "width": 85,
      "height": 50,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 1385849772,
      "version": 267,
      "versionNonce": 708456980,
      "isDeleted": false,
      "boundElementIds": null,
      "text": "external\nProvider",
      "fontSize": 20,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "top",
      "baseline": 43
    },
    {
      "id": "NbAsIRhtDGAaKhfua6uxQ",
      "type": "text",
      "x": 1615,
      "y": 396,
      "width": 345,
      "height": 25,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 1963597740,
      "version": 110,
      "versionNonce": 86600108,
      "isDeleted": false,
      "boundElementIds": null,
      "text": "https://.../oauth/..?state=<random>",
      "fontSize": 20,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 18
    },
    {
      "id": "ayEJGU6Ll2hGKXR8ZZcdI",
      "type": "arrow",
      "x": 1481.7851788487148,
      "y": 471.30041230632355,
      "width": 207.83925138491213,
      "height": 2.852508234206425,
      "angle": 0,
      "strokeColor": "#087f5b",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "round",
      "seed": 68459668,
      "version": 526,
      "versionNonce": 1983671852,
      "isDeleted": false,
      "boundElementIds": null,
      "points": [
        [
          0,
          0
        ],
        [
          207.83925138491213,
          2.852508234206425
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "focus": 0.016315290881418445,
        "gap": 10.78517884871485,
        "elementId": "RmnuZCKmX_ldJGmdnyYR7"
      },
      "endBinding": {
        "focus": -0.15846629086659308,
        "gap": 8.375569766373246,
        "elementId": "nhYIEROZqBFpjBp5pyS_N"
      },
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "tn2bKkFmMtQf7uWqfxXvV",
      "type": "text",
      "x": 1659,
      "y": 534,
      "width": 290,
      "height": 50,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 658999852,
      "version": 240,
      "versionNonce": 784960532,
      "isDeleted": false,
      "boundElementIds": [
        "ayEJGU6Ll2hGKXR8ZZcdI"
      ],
      "text": "the OIDC/OAUTH magic \nand browser redirects happen",
      "fontSize": 20,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 43
    },
    {
      "id": "qSTw6k1pUUvE5ZA1ePNZD",
      "type": "rectangle",
      "x": 2081,
      "y": 429,
      "width": 139.99999999999994,
      "height": 83,
      "angle": 0,
      "strokeColor": "#364fc7",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 1268810260,
      "version": 241,
      "versionNonce": 1415911444,
      "isDeleted": false,
      "boundElementIds": [
        "4oY0LVNN6q0dSoJxcL_0U",
        "UxVWaR69rJKDFTMZHW6gu",
        "ayEJGU6Ll2hGKXR8ZZcdI",
        "DO-1poJZdSRu2J4jrTcIT"
      ]
    },
    {
      "id": "ZpOkqHo8CCiXHtSFutPDJ",
      "type": "text",
      "x": 2120,
      "y": 448,
      "width": 61,
      "height": 50,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 569319316,
      "version": 227,
      "versionNonce": 665859884,
      "isDeleted": false,
      "boundElementIds": null,
      "text": "OIDC\nLogin",
      "fontSize": 20,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "top",
      "baseline": 43
    },
    {
      "id": "DO-1poJZdSRu2J4jrTcIT",
      "type": "arrow",
      "x": 1853.0803743075442,
      "y": 467.2454311772965,
      "width": 209.2401988826971,
      "height": 3.0305051180048395,
      "angle": 0,
      "strokeColor": "#087f5b",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "round",
      "seed": 242505388,
      "version": 556,
      "versionNonce": 823221932,
      "isDeleted": false,
      "boundElementIds": null,
      "points": [
        [
          0,
          0
        ],
        [
          209.2401988826971,
          3.0305051180048395
        ]
      ],
      "lastCommittedPoint": null,
      "startBinding": {
        "elementId": "nhYIEROZqBFpjBp5pyS_N",
        "focus": -0.05852465686908065,
        "gap": 15.080374307544162
      },
      "endBinding": {
        "elementId": "qSTw6k1pUUvE5ZA1ePNZD",
        "focus": -0.024940446129879622,
        "gap": 18.679426809758752
      },
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "gpRyFR2jxb1uxOJTukF4o",
      "type": "text",
      "x": 2067,
      "y": 533,
      "width": 227,
      "height": 75,
      "angle": 0,
      "strokeColor": "#000000",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 1,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 621773588,
      "version": 356,
      "versionNonce": 1049400852,
      "isDeleted": false,
      "boundElementIds": [
        "ayEJGU6Ll2hGKXR8ZZcdI"
      ],
      "text": "parse and process the\nauth results from the \nexternal provider",
      "fontSize": 20,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 68
    },
    {
      "id": "8aSSjxaSweL2PxTBzOHZf",
      "type": "text",
      "x": 1182,
      "y": 429,
      "width": 81,
      "height": 25,
      "angle": 0,
      "strokeColor": "#5f3dc4",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 1237460908,
      "version": 27,
      "versionNonce": 1217820948,
      "isDeleted": false,
      "boundElementIds": null,
      "text": ":redirect",
      "fontSize": 20,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 18
    },
    {
      "id": "Q5FnuGjoGQbaWo5i2rfHD",
      "type": "text",
      "x": 1508,
      "y": 432,
      "width": 81,
      "height": 25,
      "angle": 0,
      "strokeColor": "#5f3dc4",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 621452972,
      "version": 68,
      "versionNonce": 2104816148,
      "isDeleted": false,
      "boundElementIds": null,
      "text": ":redirect",
      "fontSize": 20,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 18
    },
    {
      "id": "7Av20VHjvfpoGeIRUe-Qy",
      "type": "text",
      "x": 1906,
      "y": 431,
      "width": 81,
      "height": 25,
      "angle": 0,
      "strokeColor": "#5f3dc4",
      "backgroundColor": "transparent",
      "fillStyle": "hachure",
      "strokeWidth": 2,
      "strokeStyle": "solid",
      "roughness": 1,
      "opacity": 100,
      "groupIds": [],
      "strokeSharpness": "sharp",
      "seed": 468180628,
      "version": 98,
      "versionNonce": 1386333868,
      "isDeleted": false,
      "boundElementIds": null,
      "text": ":redirect",
      "fontSize": 20,
      "fontFamily": 1,
      "textAlign": "left",
      "verticalAlign": "top",
      "baseline": 18
    }
  ],
  "appState": {
    "gridSize": null,
    "viewBackgroundColor": "#ffffff"
  }
}