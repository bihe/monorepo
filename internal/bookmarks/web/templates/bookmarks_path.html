{{template "_layout.html" .}}

{{define "title"}}Bookmarks!{{end}}

{{define "application_navigation"}}
    <div class="application_name">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
            {{range .Path}}
                {{ if .LastItem }}
                <li class="breadcrumb-item active" aria-current="page">{{ .DisplayName }}</li>
                {{ else }}
                <li class="breadcrumb-item"><a href="/bm/~{{ .UrlPath }}">{{ .DisplayName }}</a></li>
                {{ end}}
            {{end}}
            </ol>
        </nav>
    </div>
{{end}}

{{define "application_search_field"}}
    <form class="w-100 me-3" role="search" method="GET" action="/bm/search">
        <div class="input-group">
            <span class="input-group-text search-field-prefix" id="search-addon"><i class="bi bi-search"></i></span>
            <input type="search" name="q" class="form-control search-field" placeholder="Search..." aria-label="Search" control-id="search-field" value="">
        </div>
    </form>
{{end}}

{{define "style"}}
<style type="text/css">
.search-field {
    background-color: #ec84ad;
    border: var(--bs-border-width) solid #ae1d56;
}
.search-field-prefix {
    background-color: #e2588e;
    border: var(--bs-border-width) solid #ae1d56;
}
.breadcrumb-item {
    --bs-breadcrumb-divider-color: #ffffff !important;
    --bs-breadcrumb-divider: '>';
    font-size: medium;
}
.breadcrumb-item.active {
    color: #ffffff;
}
li.breadcrumb-item > a {
    color: #ffffff;
}
div.btn-group > button.btn.dropdown-toggle {
    --bs-btn-color: #ffffff;
}
.delete {
    font-weight: bold;
    color: red;
}

</style>
{{end}}

{{define "content"}}
    <div class="bookmark_list">
        {{range .Bookmarks}}
        <div class="bookmark_item hstack gap-3">
            <div class="p2">
                <span>
                {{ if .InvertFaviconColor }}
                <img width="24px" height="24px" alt="favicon" class="bookmark_favicon invert" src="/api/v1/bookmarks/favicon/{{ .ID }}">
                {{ else }}
                <img width="24px" height="24px" alt="favicon" class="bookmark_favicon" src="/api/v1/bookmarks/favicon/{{ .ID }}">
                {{ end }}
                {{ if (gt .ChildCount 0) }}
                    <span class="top-0 start-100 translate-middle badge rounded-pill bg-danger">
                        {{ .ChildCount}}
                    </span>
                </span>
                {{ end }}


                {{ if (eq .Type "Node") }}
                <a class="bookmark_name" href="{{ .URL }}">
                {{ else }}
                <a class="bookmark_name" href="/bm/~{{ trailingSlash (.Path) }}{{ .DisplayName }}">
                {{ end }}
                {{ .DisplayName }}</a>
            </div>
            <div class="p2 ms-auto"></div>

            <div class="p2"></div>
                <div class="btn-group" role="group">
                <button type="button" class="btn dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">

                </button>

                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#"><i class="bi bi-pencil"></i> Edit</a></li>
                        <li><a class="dropdown-item delete" href="#"
                            hx-target="#modals-here"
                            hx-trigger="click"
                            data-bs-toggle="modal"
                            data-bs-target="#modals-here"
                            hx-get="/bm/confirm/delete/{{.ID}}"
                            ><i class="bi bi-x"></i> Delete</a></li>
                    </ul>

                </div>
            </div>

        </div>
        {{end}}
    </div>

    <div id="modals-here"
        class="modal modal-blur fade"
        style="display: none"
        aria-hidden="false"
        tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
            <div class="modal-content"></div>
        </div>
    </div>
{{end}}
